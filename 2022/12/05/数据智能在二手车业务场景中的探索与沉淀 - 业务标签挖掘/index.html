<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <title>
      
        基于HanLP数据智能在二手车业务场景中的探索与沉淀 | 思想放牧之地
      
    </title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/apple-touch-icon.png" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon-32x32.png" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon-16x16.png" />
    
    
      <link rel="mask-icon"
            href="/images/logo.svg"
            color="" />
    
    
    
      
  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/normal.ttf);
        font-weight: normal;
    }
  </style>

  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/bold.ttf);
        font-weight: bold;
    }
  </style>


    
    <link rel="stylesheet"
          type="text/css"
          href='/css/layout.css' />
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css"/>
  

  <meta name="generator" content="Hexo 7.3.0"></head>
  <body>
    
      <div id="search-mask" style="display:none">
  <div class="search-main" id="search-main">
    <div class="search__head">
      <div class="search-form">
        <svg t="1706347533072"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="7828"
             width="20"
             height="20">
          <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
          </path>
        </svg>
        <input id="search-input" placeholder="搜索文章">
        <svg t="1706361500528"
             id="search-clear"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="4351"
             width="20"
             height="20">
          <path d="M512 562.688l-264.2944 264.2944-50.688-50.688L461.312 512 197.0176 247.7056l50.688-50.688L512 461.312l264.2944-264.2944 50.688 50.688L562.688 512l264.2944 264.2944-50.688 50.688L512 562.688z" fill="#00" p-id="4352">
          </path>
        </svg>
      </div>
    </div>
    <div class="search__body" id="search-result"></div>
    <div class="search__foot"></div>
  </div>
</div>

    
    
    <div class=head--sticky>
      <div class="nav">
        <a href='/' class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/logo.svg" />
        </a>
        <input id="navBtn" type="checkbox" />
        <div class="nav-right">
          
            <div class="search-outer">
  <div class="search" id="search-btn">
    <svg t="1706347533072"
         class="icon"
         viewBox="0 0 1024 1024"
         version="1.1"
         xmlns="http://www.w3.org/2000/svg"
         p-id="7828"
         width="20"
         height="20">
      <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
      </path>
    </svg>
    <span>搜索</span>
    <span class="search-shortcut-key">Ctrl K</span>
  </div>
</div>

          
          <div class="nav-menu">
            
              
                <a class="nav-menu-item" href="/AI">AI大模型</a>
              
                <a class="nav-menu-item" href="/photograph">拍摄摄影</a>
              
                <a class="nav-menu-item" href="/live">生活随记</a>
              
            
            <a class="nav-menu-item" href='/cv/'>简历</a>
          </div>
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner--toc">
      <div class="post-content__head">
        <div class="post-title">基于HanLP数据智能在二手车业务场景中的探索与沉淀</div>
        <div class="post-info">
          
  <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="post-tag">#大数据</a>


          <span class="post-date">2022-12-05</span>
        </div>
      </div>
      
        <aside class="toc-outer">
          <div class="toc-title">目录</div>
          <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%95%B0%E6%8D%AE%E6%99%BA%E8%83%BD%E5%9C%A8%E4%BA%8C%E6%89%8B%E8%BD%A6%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E4%B8%AD%E7%9A%84%E6%8E%A2%E7%B4%A2%E4%B8%8E%E6%B2%89%E6%B7%80---%E4%B8%9A%E5%8A%A1%E6%A0%87%E7%AD%BE%E6%8C%96%E6%8E%98"><span class="post-toc-text">数据智能在二手车业务场景中的探索与沉淀
- 业务标签挖掘</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E8%83%8C%E6%99%AF"><span class="post-toc-text">背景</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%8C%96%E6%8E%98%E4%B8%9A%E5%8A%A1%E5%93%81%E7%B1%BB%E7%9A%84%E6%A0%87%E7%AD%BE"><span class="post-toc-text">为什么要挖掘业务品类的标签？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%B7%E4%BD%93%E5%86%85%E5%AE%B9%E9%83%A8%E5%88%86"><span class="post-toc-text">具体内容部分</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%88%91%E4%BB%AC%E5%85%88%E6%9D%A5%E6%95%B4%E4%BD%93%E4%BA%86%E8%A7%A3%E6%A0%87%E7%AD%BE%E4%B8%8E%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E7%9A%84%E7%BB%93%E5%90%88%E7%82%B9%E5%A6%82%E4%B8%8B%E5%9B%BE"><span class="post-toc-text">1、我们先来整体了解标签与业务场景的结合点：如下图</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%A4%84%E7%90%86%E9%98%B6%E6%AE%B5%E8%AF%AD%E6%96%99%E7%9A%84%E5%A4%84%E7%90%86---%E8%AF%8D%E5%90%91%E9%87%8F---%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB---%E5%AE%9E%E9%AA%8C"><span class="post-toc-text">2、处理阶段（语料的处理
-&gt; 词向量 -&gt; 关联关系 -&gt; 实验）：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%BA%8C%E6%89%8B%E8%BD%A6%E6%A0%87%E7%AD%BE%E5%B7%A5%E7%A8%8B%E8%AF%A6%E7%BB%86%E6%B5%81%E7%A8%8B%E5%B1%95%E5%BC%80%E5%A6%82%E4%B8%8B"><span class="post-toc-text">3、二手车标签工程详细流程展开如下：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%88%86%E8%AF%8D%E6%95%88%E6%9E%9C%E7%9A%84%E8%BF%AD%E4%BB%A3"><span class="post-toc-text">4、分词效果的迭代</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%85%B3%E4%BA%8E%E5%88%86%E8%AF%8D%E4%B8%8E%E5%B7%A5%E7%A8%8B%E9%83%A8%E5%88%86%E7%9A%84%E7%BB%93%E5%90%88%E6%B5%81%E7%A8%8B%E5%A6%82%E4%B8%8B%E5%9B%BE6"><span class="post-toc-text">5.
关于分词与工程部分的结合流程，如下图6：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%85%B3%E4%BA%8E%E8%AF%8D%E5%90%91%E9%87%8F%E9%83%A8%E5%88%86"><span class="post-toc-text">6、关于词向量部分</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="post-toc-text">7、标签库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%BB%8E%E5%9C%BA%E6%99%AF%E6%A0%87%E7%AD%BE%E6%9C%8D%E5%8A%A1%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9E%8B%E4%B8%89%E4%B8%AA%E6%A8%A1%E5%9D%97%E6%9D%A5%E7%AE%80%E5%8D%95%E8%AF%B4%E6%98%8E%E7%9B%AE%E5%89%8D%E6%88%91%E4%BB%AC%E7%BA%BF%E4%B8%8A%E6%A0%87%E7%AD%BE%E5%8F%AC%E5%9B%9E%E7%9A%84%E6%97%B6%E5%BA%8F"><span class="post-toc-text">8、从场景、标签服务、用户模型三个模块来简单说明目前我们线上标签召回的时序：</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%80%BB%E7%BB%93%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1"><span class="post-toc-text">总结分析与设计</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BD%9C%E8%80%85%E7%AE%80%E4%BB%8B"><span class="post-toc-text">作者简介</span></a></li></ol></li></ol>
          <a href="#" class="toc-top">回到顶部</a>
        </aside>
      
      <div class="post-content__body">
        
          <div class="post-gallery">
            
          </div>
        
        <h1
id="数据智能在二手车业务场景中的探索与沉淀---业务标签挖掘">数据智能在二手车业务场景中的探索与沉淀
- 业务标签挖掘</h1>
<blockquote>
<p><strong>导语</strong>：标签为用户提供了一种新的检索方式，用户和信息通过标签进行关联，信息的标签化、行为的标签化，在提供个性召回能力的同时，也有助于帮我梳理和挖掘业务品类的特征，做相关业务属性的聚合。</p>
</blockquote>
<h2 id="背景"><strong>背景</strong></h2>
<p>当下全连接的信息场景，所有对于有助于连接转化效率提升的内容和考虑尤为重要，这就要求我们在实际业务场景中，结合用户行为的每个关键的行为节点进行深入的分析和思考。通过用户全链路的分析并结合平台用户业务数据的不断沉淀，在不同的行为环节进行辅助和提效，我们将feed（信息流）场景中用户的关键行为分拆为4个阶段：1流量的接入、2检索、3点击、4电话，首先来整体看下，我们在用户的四个关键行为节点都做了哪些内容？（内容摘要参考图1）</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szdv1xi2j30w30ct76c.jpg" />
（图 1 - 关键节点的技术内容摘要)</p>
<ol type="1">
<li>在流量的接入环节，我们希望具备两种能力：一种是对用户身份的预估与分层，另一种是我们需要对已有历史行为的用户进行相对准确的兴趣描述。用户身份的预估是后续多个业务场景策略干预的基础，兴趣的准确描述是提供准确召回能力的基础。</li>
<li>在检索的这个环节我们尝试了一种新的方式，对信息（车）进行标签化的表述，信息通过标签聚合，可以帮助提升长尾信息的曝光能力，通过用户的行为我们可以将用户
- 标签 -
信息串联，做到标签的个性化展示，通过持续完善标签的质量（召回能力）、标签
- 车系的关联准确度，进而带来对转化效率提升的正向刺激。</li>
<li>在点击环节 -
feed场景下ctr的提升是各业务的重点，在持续优化基础的体验的同时会加入智能的干预，通用的做法是介入模型的干预，对ctr进行预估，并结合召回模块在下一个阶段做信息的精排，过程中会加入策略、规则及算法的融合，另外也需要考虑的一个问题是ctr导向与商业的收入导向的目标需要结合考虑。</li>
<li>电话这部分主要是考虑系统的高可用与提升号码资源的使用效率，并降低不同spm（渠道）的接入成本，同时针对不同的数据纬度进行分析。今年围绕电话这个环节我们也做了一些赋能的场景，结合用户的身份预估做智能AxB的绑定，结合用户的身份及历史行为进行模型的训练
-
做cvr拨打的预估，这些在提升号码资源的使用效率&amp;降低串号率方面都获得的不错的效果。</li>
</ol>
<p>今天文章整理的是关于第二个行为环节的内容 - 关于信息标签的挖掘。</p>
<h2
id="为什么要挖掘业务品类的标签"><strong>为什么要挖掘业务品类的标签？</strong></h2>
<p>前面提到，在检索的这个环节我们尝试了一种新的方式，对信息（车）进行标签化的表述，信息通过标签聚合，这有别于传统按业务规则固定的检索方式，可以帮助我们提升长尾信息的曝光能力；通过用户的历史行为我们可以将「用户
- 标签 - 信息」串联，做到标签的个性化展示，通过持续完善标签的质量、标签
- 车系的准确度，进而带来对ctr提升的正向刺激。</p>
<p>信息的标签化，在提升信息个性化展示、体验的同时，也有助于帮助我们发掘品类基本检索属性之外的个性内容，如描述感官的、描述价值的、描述体验的，如：“年轻化、耐造、买菜、动力澎湃、外形炫酷”，这也会极大的丰富我们商品特征的表现形式，结合不同人群兴趣、特征的划分，考虑从信息特征的维度将用户的兴趣进行聚合（这个思路在前面关于用户兴趣描述中也提到过），可以做相对精准的信息召回，进而也会带来对ctr提升的正向刺激。</p>
<p>搭建二手车的标签系统需要对业务有相对深入地了解，在前期语料处理、分词部分需要投入一定的人工成本进行标注、分类和挑选，并结合场景实验的反馈进行持续的优化。标签的种类可以按照业务品类的属性进行区分，比如：“描述外观”、“描述配置”、“描述操控”、“描述情感”、或其他的属性词。</p>
<p>二手车业务标签挖掘这部分包含几块主要的内容：语料的获取、分词、车品类分词模型的训练、词向量、及分层的实验并结合场景的反馈提升标签的质量（召回能力、ctr）标签-车系的准确度，分词模型与词向量的计算很大程度上受限与语料的质量，所以在前期对于语料的处理也会投入不小的精力。</p>
<h2 id="具体内容部分"><strong>具体内容部分</strong></h2>
<h3
id="我们先来整体了解标签与业务场景的结合点如下图"><strong>1、我们先来整体了解标签与业务场景的结合点：如下图</strong></h3>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szebdul1j30w70mo41c.jpg" /></p>
<p>​ （图 2 - 标签与业务场景的结合方式）</p>
<p>场景：</p>
<ol type="1">
<li>为列表页固定位置提供个性筛选标签区域 -
此区域可以理解为穿插在feed中的一块固定的位置，如图所示该部分标签内容的组成包括：用户的筛选条件、热门标签、个性标签、创意标签等。该场景实验的指标是对标上下车源信息的点击率，目前二手车第一版标签的实验也是在这个场景上进行的，通过持续的迭代观测效果。</li>
<li>发布场景 -
个性标签选择&amp;单元参数，在规范和格式化的发布场景中，我们希望针对目标车系、车型召回个性的标签，用于车源信息的补充说明，在丰富信息个性展示的同时，这些标签也会作为单元参数，同上面提到的用户兴趣描述-召回的场景进行协同，关注用户在某个业务属性上的兴趣专注度，高效的召回相关的信息。</li>
<li>item信息的标签展示（个性内容）-
feed场景中item标签的展示可以体现信息的个性，个性的标签也会match用户的属性，做个性的召回展示。</li>
<li>优质的标签或无命中的检索词，进行阶段性的汇总，提供给中台检索部门支持搜索框检索，这部分是对高频、业务特殊属性词、无命中检索能力的一个补充和支持。</li>
</ol>
<h3
id="处理阶段语料的处理---词向量---关联关系---实验"><strong>2、处理阶段（语料的处理
-&gt; 词向量 -&gt; 关联关系 -&gt; 实验）：</strong></h3>
<ol type="1">
<li>语料的处理 -
标签工程对抓取的语料做分词处理，分词的过程也是训练车品类分词模型的过程（需要先期人工的标注），对分词的结果进行人工的筛选，选定备用的标签，存储标签库，关于标签库的设计在后续内容中进行说明。</li>
<li>词向量 -
对标签做词向量的计算，这有助于帮助我们扩展标签的召回能力（这个地方我们起初犯过一个错误，我们过分依赖词向量对召回的扩展能力，但不知标签词向量的计算是依赖语料的，我们先期选定的语料是某口碑的数据，语料本身的形式、内容会有很多的局限性，这就造成计算的词向量并不具备广泛认知的代表性，也就造成了最初线上标签召回能力差和准确度低的问题）。</li>
<li>关联关系 -
前面的内容已经提到用户兴趣的描述，在标签的召回环节也会依赖用户的兴趣基础做标签子集的召回，信息
- 标签 - 人存在稳定的映射关系，做到标签的个性展示。</li>
<li>实验 - 第四部分是关于实验的对照，标签工程的两个核心的指标是：1
标签的召回能力 2
标签到车系的对应关系准确度，所以通过线上用户在标签点击和信息点击环节的数据回溯，可以帮助我们去观测这批选定标签的质量，这也是实验的重点。</li>
</ol>
<h3
id="二手车标签工程详细流程展开如下"><strong>3、二手车标签工程详细流程展开如下：</strong></h3>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szf191qrj30ty0cxmzu.jpg" /></p>
<p>​ （图 3 - 二手车标签工程整体流程）</p>
<p>流程描述：</p>
<p>阶段1 - 语料的收集</p>
<p>语料的收集可以有多种渠道，我们可以挖掘站内车源信息本身的内容、可以从车相关的新闻/媒体文章中截取相关的内容、可以统计站内搜索的内容/热词、也可以收集公开的口碑/评价信息进行标签的提取，受限于资源和精力的投入，目前我们通过最后一种方式进行语料的收集和完善（这边也会涉及到一些爬虫性能的优化，不做展开）。</p>
<p>阶段2 - 分词</p>
<p>分词是提取标签的过程，是NLP的一个环节，起初关于分词工具的选择，我们对标了jieba、HanLP和LTP，针对相同的语料分词系效果基本一致，受限于商业应用的限制及开发语言的支持，最终考虑使用HanLP作为我们的分词工具，分词的结果经过规则的过滤产出粗选词，这边是人工标注的环节，将业务类的词组进行标注，避免分词过度，也会摒弃问题语料或干扰词，处理后的语料会放回到模型中继续参与分词，分词的过程本身也是训练车品类分词模型的过程。</p>
<p>关于词向量的计算前面也稍微提了一下，词向量的计算结果很大程度上受限于语料的来源，如word2Vec会通过固定窗口长度的上下文预测词条的概率，计算词向量，相同的词条在媒体类文章和口碑类评论两种语料中计算出的词向量是差别很大的，所以后面我们也弱化了通过词向量计算扩展标签的召回能力这种方式，并加入一定的人力成本去做词条的整理和归类（先验知识）。</p>
<p>阶段3 - 标签库</p>
<p>标签库的内容是个持续更新和完善的过程，接收分词的结果，并针对备选词作人工的筛选与分类，去掉无用的词条、错误的词条。</p>
<p>我们会将不同品类的词条进行划分，相近含有的词条会参考线上实验的效果（标签ctr）做取舍，如
“动力嗷嗷 0.00048、动力澎湃 0.00167、动力强劲
0.001164”，参考ctr最终会保留词条“动力澎湃”。</p>
<p>我们也会去掉一些ctr很高但词意表述或者召回含义并不清晰的词条，如“小轿车、颜值、稳重”这类的词条，这些词条不利于我们后续从标签到车系准确关系的建立，词条召回的含义过于发散，相对优质的标签是可以准确表述一类或几类商品，并且这种表述符合大多数人的认知。</p>
<p>从标签的质量角度考虑，我们也尽量不会选择2个字词条，主要以4个字及以上的词条为主，如“动力澎湃、外观拉风、城市穿梭利器、路感清晰、省心省油”等。</p>
<p>标签的筛选需要4个阶段：1 从标签的个性代表度进行筛选、2
从标签到信息的召回能力进行筛选、3
对标签按属性进行分类，比如我们依赖这些词条的描述内容进行划分：描述驾驶体验、感官、配置、商品特征等、4
最后阶段做标签的检查处理。</p>
<p>总体来说，标签库的工作需要对业务有相对深入的理解，带有业务特性的先验知识和决策在这个环节中起到了非常关键的作用。</p>
<p>阶段4 - 场景的反馈</p>
<p>在标签的召回环节，我们同之前第一部分用户兴趣的描述-模型相结合，依托中台的日晷平台进行多组的线上实验，日晷系统支持多层的多策略的实验组合，与工程的接入有良好的切合，配置成本也相对不高。实验的结果结合曝光和用户的点击行为对不同标签的线上效果进行反馈，主要是围绕标签的召回能力和准确率进行的，这个环节的反馈会帮助我们不断迭代标签库内容，在项目较成熟后期，我们也会考虑将这个环节开放产品配置的模块。</p>
<h3 id="分词效果的迭代"><strong>4、分词效果的迭代</strong></h3>
<p>关于分词部分，大体经历了三个阶段的迭代「语料 -
宝马品牌业务口碑数据」，如下图4描述：</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8t086ucqlj30wm0lrtbv.jpg" /></p>
<p>​ （图 4 - 分词的迭代）</p>
<p>第一版的分词实验是按词性进行的，观测结果并不理想，分词效果如下：</p>
<p>「颜/ 值/ ，/ 还是/ 颜/ 值/ 。/ 新/ X3/ 的/ 前/ 脸/ 很/ 凌厉/ ，/
侧面/ 比例/ 和/ 腰/ 线/ 也/ 不错/ 。/ 操控/ 让/ 人/ 极其/ 满意/ ，/
尤其/ 高速/ 时/ 的/ 表现/ ，/ 简直/ 就是/ 越/ 快/ 越/ 稳/ ，/ 开/ 宝马/
看来/ 的确/ 不是/ 吹/ 的/ 。」</p>
<p>已有的分词器是单纯按照词性进行分词的，接下来，我们需要针对不同词性的组合来进行第二版的分词。</p>
<p>第二版的分词引入了结构化感知机标注框架进行辅助分词，该框架是通过感知机做序列标注任务，配置起来也相对简单和实用，针对类似语料分词的效果如：</p>
<p>「颜值/nz ，/w 还是/c 颜值/nz 。/w 新/a X3/n 的/u 前脸/n 很/d 凌厉/a
，/w 侧面/f 比例/n 和/c 腰线/n 也/d 不错/a 。/w 操控/v 让/v 人/n 极其/d
满意/v ，/w 尤其/d 高速/d 时/Ng 的/u 表现/vn ，/w 简直/d 就/d 是/v 越/d
快/a 越/d 稳/a ，/w 开宝/v 马看来/nr 的确/d 不/d 是/v 吹/v 的/u
。/w」。</p>
<p>从分词的效果来看，如“新X3”、“开宝马”、“高速时”等这类的领域词汇没有被标注出来，从而认为降低了分词的效果。</p>
<p>分词效果的提升是个不断迭代的过程，在标准模型的基础上加大人工标注的投入，分阶段筛选出可用词条，做有放回的语料补充，或通过词性做词组的扩展。在hanlp的基础上我们新加了chelib（车型库）中的品牌车系和汽车的专用词库，并对不影响句子整体表达的副词、连词等词性的分词做了过滤，同时也增加了对负面词语的判定逻辑，在分词质量上有了较大的提升。</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szif2llmj30tv072tbc.jpg" /></p>
<p>​ （图 5 - 业务品类的标签词）</p>
<h3 id="关于分词与工程部分的结合流程如下图6"><strong>5.
关于分词与工程部分的结合流程，如下图6：</strong></h3>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szj66tjgj30ma0lc0uy.jpg" /></p>
<p>​ （图 6 - 与工程部分的结合的流程）</p>
<p>说明：</p>
<ol type="1">
<li>基础的语料经过格式的规整存储mysql，规整后的语料数据包含：id、time、city、品牌、车系、内容。</li>
<li>通过人工标注的方式将业务品类相对固定的词条生成字典，提供hanlp初始化。</li>
<li>经过初步的分词后的结果产出10w量级的词条，经过去重、过滤及业务侧个性的筛选规则要求，有效分词为5.7w。</li>
<li>通过词性的标注和词组的扩展流程，产出可用词组，针对这些词组做业务相关性的分析和筛选，并针对筛选后的结果集做聚合，这部分可以认定为基础标签，基础标签结合先线上实验效果的反馈最终会进行评估，筛选稳定优质的线上使用标签。</li>
<li>配合阶段4也会做词向量的计算，产出词向量矩阵，扩展标签的召回能力，并加入一定量的人工成本进行干预。</li>
</ol>
<h3 id="关于词向量部分"><strong>6、关于词向量部分</strong></h3>
<p>关于词向量：</p>
<ol type="1">
<li>词向量描述了目标词组在固定语料基础集上训练的空间位置（多维空间）。</li>
<li>可以通过欧式或cos计算标签之间的空间距离，帮助我们找到距离相近的标签。</li>
<li>距离相近的标签一定程度上可以帮助我们扩展标签词的信息召回能力，提升召回率，并在信息返回上提供了一定新颖信息的探索能力。</li>
<li>目前我们采用word2vec进行词向量的计算，word2vec是目前比较普遍的词向量算法，word2vector
输出的结果可以理解为当前的词在固定语料中的空间位置，很多人都有一些了解，它包含CBOW/Skip-gram两种训练模式，是一个结构简单的神经网络，通过上下文预测当前词、或者通过当前词预测上下文，感兴趣的可以参考下word2vector的原理、训练过程。</li>
</ol>
<p>【词向量的生成过程】：</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szsjism3j30vo05jdga.jpg" /></p>
<p>​ （图 7 - 词向量的生成）</p>
<p>前面提到词向量可以理解为：目标词条在当前语料中的空间位置，以“我”字为例在我们语料中训练后100维的词向量可表示为如下：</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8t08w1cw8j30sj03mjte.jpg" /></p>
<p>​ （图 8）训练后的词向量</p>
<p>通过词向量扩展标签的召回能力：</p>
<p>通过对已选标签词向量的计算，生成词向量矩阵，这可以帮助我们发现当前语料基础上的相似标签，以扩展标签的召回能力，如下图9：标签3与标签2、标签4词向量接近，那么我们可以认识车型2、车型3、车型6也在标签3的召回能力中，当然这个过程也需要介入一定量的人力查验的工作，check相关车系、车型的符合度，进而调整标签同车、车型的映射关系。</p>
<figure>
<img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8szzuk0yjj30py08rjs9.jpg"
alt="image-20221205160828746" />
<figcaption aria-hidden="true">image-20221205160828746</figcaption>
</figure>
<p>​ （图 9 - 标签相似性的扩展）</p>
<h3 id="标签库"><strong>7、标签库</strong></h3>
<p>标签库的数据层级的设计对应了二手车的车型库的基本层级结构，映射关系分了3层：品牌
→ 车系 →
车型，从数据的层级结构来看，标签依次对应了品牌、车系、车系，可以按不同的维度层级进行聚合，生成相关的检索条件，从标签数据的存储格式：ID
| name | 车型ids | 车系ids | 品牌ids
可以发现标签的召回顺序依次是车型、车系、品牌，在后来的实际应用中，可以认定准确描述车型级别的标签很少，并且不具备良好的召回能力和泛化能力，所有我们目前考虑的召回层级只到车系这一级别。如图10:</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8t00i3bdaj30vj0aimyv.jpg" /></p>
<p>​ （图 10 - 标签库的层级关系）</p>
<p>标签库本身是个不断迭代和自我学习的过程，清晰的层级映射服务于线上的召回场景，并结合线上效果的反馈提升和优化标签子集，主要参考的指标仍然是召回能力和准确率，本身用户的行为就是一个很好的反馈，所以标签库的实验也是一个ctr和质量提升相互促进的过程。另外目前二手车标签挖掘的内容相对比较基础，初步搭建工程的同时实现了关于上面全流程的几个核心的节点，但可参考的指标还没有明显的提升，后续如果资源允许，我们也考虑加大这部分的投入，将这部分配置工具化，提供给产品同学可操作与观察的配置平台，这这部分实验的工作快速有效的流程化进行。</p>
<p><img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8t027w1j5j30u608raar.jpg" /></p>
<p>​ （图 11 - 标签库的更新）</p>
<h3
id="从场景标签服务用户模型三个模块来简单说明目前我们线上标签召回的时序"><strong>8、从场景、标签服务、用户模型三个模块来简单说明目前我们线上标签召回的时序：</strong></h3>
<p>用户的基础行为topN会映射为标签，通过相似度扩展标签的范围，这样我们将人和info通过标签建立关联，标签映射ses查询条件，直接用于相关info的召回，召回时序如下图12：</p>
<figure>
<img
src="https://image.baidu.com/search/down?url=https://tva1.sinaimg.cn/large/008vxvgGly1h8t02y6qsmj30v60q1tas.jpg"
alt="image-20221205161129149" />
<figcaption aria-hidden="true">image-20221205161129149</figcaption>
</figure>
<p>​ （图 12 - 标签召回的时序）</p>
<p>说明：</p>
<ol type="1">
<li>流量入口我们选取的是二手车m页的第二页曝光内容，在feed流中插入实验的标签区域，该区域的曝光会携带用户信息（cookie、设备信息等）首先从标签服务拉取标签信息，用户的身份信息会结合用户的模型进行兴趣召回，这个点是同之前我们的说到的用户兴趣描述相结合的，基础用户数据是IDMapping与相关设备信息、cookie、tel的映射，保存了IDMapping到用户兴趣的模型，标签服务通过用户兴趣描述的topN（检索条件）反向查询标签，作为标签的召回子集反馈给场景。针对无行为用户（新客）或行为较少的用户，就需要考虑标签的补足，补足的标签主要是从按地域热门标签中抽取。</li>
<li>标签曝光后，用户通过标签的点击做车源信息的召回，召回的顺序是从车型 →
车系 →
品牌，这边的信息召回也会结合广告贴策略有所侧重，召回能力不足时，同样需要考虑补足的能力，比如通过词向量召回相似或热门召回更多的信息，相同属性及语意相似的标签，我们也会保存关联的关系，如：动力澎湃
- 动力强劲、外观拉风 - 外观拉轰、外形威猛 -
肌肉车，后者虽然不在线上召回的子集，但却可以帮助提升召回的能力。</li>
<li>车源信息的曝光结合用户的点击行为作为我们回溯模型的数据进行记录和分析。</li>
</ol>
<p>基于场景的反馈始终也是以提升ctr为核心的，所以标签应用部分提高标签的质量和召回能力本质上就是提高对ctr的转化效率，目前我们正在做的手段：1
选取优质标签子集 2 人工干预和调整，分析看标签召回能力分布 3
结合用户特征做标签的展示策略（历史查询行为 形容词 高热词 相关高匹配次
探索词） 4 监控效果行程反馈-快速实验 5 提高位置争取资源。</p>
<p>并且在后面的实验场景中，我们也需要建立从：1 标签召回 → 2标签点击 → 3
信息检索 → 4 信息点击 → 5 电话转化完整链路的数据分析能力。</p>
<p>标签是2019年团队新启动的技术项目，目前不是特别的成熟，从标签的召回到信息的曝光到ctr提升的指向完整链路的数据在后面会和大家分享。</p>
<h2 id="总结分析与设计"><strong>总结分析与设计</strong></h2>
<p>整体来看，标签的挖掘为用户提供了一种新的检索方式，用户和车源通过标签进行关联，这有别于传统固定规则的检索方式，信息的标签化、行为的标签化，在提供个性召回能力的同时，也有助于帮我梳理和挖掘业务品类的特征，这些内容和后面的业务品类的「特征工程」相辅相成。</p>
<p>至此关于《数据智能在二手车业务场景中的探索与沉淀 - Part2
关于业务标签挖掘》部分的内容整理结束，在后面的分享中机会针对第三个关键行为节点“用户的点击”进行技术内容的整理与分享，涉及的技术内容：业务品类特征工程的搭建、排序、相关算法的应用（lr、XGBOOST、FM、DeepFM、GBDT等）。</p>
<h2 id="作者简介"><strong>作者简介</strong></h2>
<p>李晓东 -
2015年1月加入58集团二手车技术团队，现任二手车技术部高级技术经理，负责二手车商业技术团队、拍卖技术团队，开发及管理工作。</p>
<p>穆文斌 -
58同城ABG资深研发工程师，负责二手车电话、声纹、NLP等技术在二手车业务中的实践与应用。</p>

      </div>
    </div>
    
      <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script>
      <script>
        if (window.mermaid) {
          mermaid.initialize({"startOnload":true});
        }
      </script>
    
  </article>
  <div class="post__foot">
    
      <div class="like-author">
  <input type="checkbox" id="likeCode" />
  <div class="author-face">
    <img height="100px"
         width="100px"
         id="front-face"
         alt="author face"
         src="/images/author-face.jpg" />
    <img height="100px"
         width="100px"
         id="back-face"
         alt="like code"
         src="/images/pay-code.jpg" />
  </div>
  <div class="like-text">“给作者倒杯卡布奇诺”</div>
  <label for="likeCode" class="like-btn">
    <svg viewBox="0 0 1024 1024"
         width="20px"
         style="margin-right: 10px"
         height="20px">
      <path d="M466.88 908.96L113.824 563.296a270.08 270.08 0 0 1 0-387.392c108.8-106.56 284.896-106.56 393.696 0 1.504 1.472 2.976 2.944 4.448 4.48 1.472-1.536 2.944-3.008 4.448-4.48 108.8-106.56 284.896-106.56 393.696 0a269.952 269.952 0 0 1 34.016 347.072l-387.392 385.6a64 64 0 0 1-89.92 0.384z" p-id="13650" fill="#ee4242" />
    </svg>
    喜欢作者
  </label>
</div>

    
    <div class="post-nav">
  
    <a class="post-nav-item-left" href="/2022/12/05/%E5%9F%BA%E4%BA%8EHanLP%E7%9A%84Elasticsearch%E5%88%86%E8%AF%8D%E6%8F%92%E4%BB%B6/">
      <div class="text-align">
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
        <span class="text-small">上一篇</span>
      </div>
      <div>基于HanLP的Elasticsearch分词插件</div>
    </a>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2022/09/26/HanLP%E5%88%86%E8%AF%8D%E5%B7%A5%E5%85%B7%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%95%86%E5%93%81%E5%9B%BE%E8%87%AA%E5%8A%A8%E6%8E%A8%E8%8D%90%E5%8A%9F%E8%83%BD%E7%9A%84%E5%BA%94%E7%94%A8/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
      </div>
      HanLP分词工具应用案例：商品图自动推荐功能的应用
    </a>
  
</div>

    
    
  </div>

    </div>
    <div class="foot">
  <div class="foot-inner">
    <div class="foot__head">
      
        <div class="foot-line">
          <div class="matts">今</div><div class="matts">夜</div><div class="matts">无</div><div class="matts">眠</div>
        </div>
      
        <div class="foot-line">
          <div class="matts">睡</div><div class="matts">意</div><div class="matts">全</div><div class="matts">无</div>
        </div>
      
    </div>
    <div class="foot__body">
      
        <div class="foot-item">
          <div class="foot-item__head">朋友</div>
          <div class="foot-item__body">
            
            


  
  
    <div class="foot-link-group">
      
        
        
          <div class="text">
            <img alt="link"
                 height="20px"
                 width="20px"
                 src="/images/icon/icon-link.svg" />
            <a class="foot-link" target="_blank" rel="noopener" href="https://moyanxinxu.github.io/unlock-hf/">unlock-hf</a>
          </div>
        
      
        
        
          <div class="text">
            <img alt="link"
                 height="20px"
                 width="20px"
                 src="/images/icon/icon-link+.svg" />
            <a class="foot-link" href="mailto:873101411@qq.com?subject=申请http://example.com的友链">申请友链</a>
          </div>
        
      
        
        
      
        
        
      
    </div>
  


          </div>
        </div>
      
      
        <div class="foot-item">
          <div class="foot-item__head">账号</div>
          <div class="foot-item__body">
            


  
  
    <div class="foot-link-group">
      
        
        
          <div class="text">
            <img alt="link"
                 height="20px"
                 width="20px"
                 src="/images/logo-github.svg" />
            <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/viserion-nlper">viserion-nlper</a>
          </div>
        
      
        
        
          <div class="text">
            <img alt="link"
                 height="20px"
                 width="20px"
                 src="/images/logo-wx.svg" />
            <a class="foot-link" target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Fq9ZIUwZvMNx2kSahz8zEw">HanLP.com</a>
          </div>
        
      
        
        
          <div class="text">
            <img alt="link"
                 height="20px"
                 width="20px"
                 src="/images/logo-zh.svg" />
            <a class="foot-link" target="_blank" rel="noopener" href="https://www.zhihu.com/people/shuo-hao-jin-ye-bu-dian-yan">点烟侠</a>
          </div>
        
      
        
        
      
    </div>
  


          </div>
        </div>
      
      <div class="foot-item">
        <div class="foot-item__head">联系</div>
        <div class="foot-item__body">
          


  
  
    <div class="foot-link-group">
      
        
        
          <div class="text">
            <img alt="link"
                 height="20px"
                 width="20px"
                 src="/images/icon/icon-email.svg" />
            <a class="foot-link" href="mailto:name@example.com">name@example.com</a>
          </div>
        
      
        
        
      
        
        
      
        
        
      
    </div>
  


        </div>
      </div>
    </div>
    <div class="copyright">
      <a href="http://example.com">思想放牧之地</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
      <svg width="20" height="20" viewBox="0 0 725 725">
        <path fill-rule="evenodd" fill="rgb(221, 221, 221)" d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z" />
        <path fill-rule="evenodd" fill="rgb(159, 159, 159)" d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z" />
        <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z" />
      </svg>
      <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
    </div>
  </div>
</div>

    
    
      <script src="/js/search.js"></script>
      <script>searchInitialize("/search.json")</script>
    
    <script src="/js/copy-code.js"></script>
    
  

  </body>
</html>
